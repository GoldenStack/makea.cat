<!DOCTYPE html>
<html>
    <head>
        <title>makea.cat</title>
    </head>
    <body id="bg">
        <style>
            #bg {
                text-align: center;
            }
        
            #cta {
                margin: 0 auto;
                width: 400px;
                height: 256px;
                border: 1px solid black;
            }
        </style>
        <p>make a cat / fer un gat</p>
        <div id="cta">
        </div>
        <p>come back at 2:22 / torna a 2:22</p>
        <script>
            let rng = () => Math.round((Math.random()*0.7+0.3)*255);
            let randomColor = () => `rgb(${rng()}, ${rng()}, ${rng()})`;
    
            document.getElementById("bg").style.backgroundColor = randomColor();
    
            let d = new Date();
            let h = d.getHours(), m = d.getMinutes();
    
            let t = (h == 2 || h == 2 + 12) && m == 22;
    
            let img = document.createElement("img");
            img.src = "/cat?" + (t ? `${d.getTime()}&${d.getTimezoneOffset()}` : "torna");
            document.getElementById("cta").appendChild(img);
        </script>
    </body>
</html>
